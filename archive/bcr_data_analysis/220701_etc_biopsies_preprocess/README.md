# Introduction

## Input data
Bulk BCR sequencing data analysis repo. 

In this analysis, we use the input `FASTQ` files from `/mnt/storage/data/local/mol_med/bcr/220701_etc_biopsies/samples` in the `molmed` server. A copy of this `FASTQ` dataset is stored in `Coscine` *220701_etc_biopsies_Simons.tar.gz*.

## Metadata

See the file `mid_labels.csv` in the folder `220701_etc_biopsies_data_analysis` in github repo. 

# Run `mixcr` pipeline from `FASTQ` files

- Run the following command to run `mixcr` pipeline: 

```bash 
./mixcr_pipeline/run_mixcr_pipeline.sh -i /path/to/input/FASTQ/files -o /path/to/save/output -e ".fastq"
```

A successful output run is stored at: `molmed-server: /home/hieu/outdir/bcrtree_outdir/20240903/mid_based_output` or `hieu-server: /media/hieunguyen/HNSD01/outdir/220701_etc_biopsies`.

# Run downstream analysis

## Generate trees by the built-in BCR tree algorithm in `mixcr`
### Preprocessing steps
- `rsync` output files from MID-based outputs to for MOUSE-based outputs: (1) Run `generate_sample_groups_to_generate_trees.R` to generate lists of samples. (2) Run the script `rsync_clns_files_to_mouse_based_output.sh` to rsync the `*.clns` files from MID-based outputs to the customize group-based outputs.   

### Main run

# Run `gctree` pipeline 

## Preprocessing steps
- **[NOT USE]** Convert MID-based outputs to mouse-based outputs: use the metadata `mid_labels.csv` as input to the script `./220701_etc_biopsies_data_analysis/generate_sample_groups_to_generate_trees.R`. We generate 4 cases: `mouse_based_output` use all MIDs in a mouse to generate trees, `mouse_YFP_based_output` use only YFP-available MIDs in a mouse to generate trees, `mouse_YFPpos_based_output` use only YFP-positive MIDs in a mouse to generate trees, similarly, `mouse_YFPneg_based_output` use only YFP-negative MIDs. 

### Generate mouse-based trees

# Visualize trees generated by built-in `mixcr` pipelines

# Clone data analysis


